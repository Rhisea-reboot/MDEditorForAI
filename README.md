# MD Editor For AI
一款基于C++开发的Windows命令行工具，可自动扫描指定项目目录，生成包含**目录树结构、指定后缀代码内容、自定义需求**的Markdown文件，帮助开发者向AI清晰描述项目背景与需求，提升沟通效率。

## 功能特性
- 📁 **自动生成目录树**：可视化展示项目层级结构，使用`├──`/`└──`等符号呈现，结构清晰易读；
- 🧩 **指定后缀代码提取**：支持自定义文件后缀（如`.cpp`/`.py`/`.java`），自动将代码封装为Markdown代码块（适配对应语言标签）；
- 🌐 **UTF-8编码适配**：解决Windows控制台中文路径/内容乱码问题；
- 🎨 **交互式命令行体验**：彩色输出（成功/错误/提示信息区分）、加载动画、输入合法性校验，提升使用体验；
- 📝 **自定义需求追加**：支持输入项目自定义需求，并自动写入Markdown文件；
- 🔧 **二进制文件拷贝**：以二进制模式读取文件内容，保证代码、特殊字符无失真。

## 环境要求
- **操作系统**：Windows（依赖Windows API：COM接口、控制台编码、宽字符处理）；
- **编译器**：支持C++17及以上版本（使用`<filesystem>`库）；
- **构建工具**：Visual Studio（MSVC） / MinGW-w64（g++）。

## 编译步骤
### 方式1：Visual Studio
1. 创建空的C++控制台应用项目；
2. 将`include/`目录下的头文件、`src/`目录下的源文件全部添加到项目中；
3. 配置项目属性：
   - C++标准：选择“ISO C++17 标准(/std:c++17)”；
   - 字符集：使用多字节字符集（或确保UTF-8编码启用）；
4. 选择x86/x64架构，编译生成`main.exe`。

### 方式2：MinGW-w64（命令行）
```bash
# 编译命令（替换路径为本地include/src实际路径）
g++ -std=c++17 -I./include src/main.cpp src/getFile.cpp src/initPrint.cpp -o md_editor_ai.exe -lole32 -luuid
```
- `-lole32`/`-luuid`：链接Windows COM API库（文件夹选择功能依赖）。

## 使用方法
1. 运行编译后的`main.exe`（或`md_editor_ai.exe`）；
2. 按照命令行交互提示逐步操作：
   | 步骤 | 说明 |
   |------|------|
   | 输入项目名称 | 不能为空，将生成`<项目名>.md`作为输出文件； |
   | 输入项目路径 | 支持绝对路径/相对路径，程序会验证路径是否存在且为目录； |
   | 输入文件后缀 | 空格分隔多个后缀（如`cpp h py`），程序自动补全前缀`.`；直接回车使用默认值：`.cpp .h .hpp`； |
   | 输入项目需求 | 详细描述项目需求，内容会追加到生成的Markdown文件中； |
3. 操作完成后，在可执行文件同级目录查看生成的`<项目名>.md`文件，包含完整的项目目录结构、指定后缀代码、自定义需求。

## 项目结构
```
MDEditorForAI/
├── include/          # 头文件目录（接口定义）
│   ├── folderSelector.h  # Windows文件夹选择（COM接口封装）
│   ├── getFile.h         # 文件/目录处理核心接口
│   ├── initPrint.h       # Markdown文件初始化接口
│   └── uiHelper.h        # 命令行UI增强（颜色/动画）
└── src/              # 源文件目录（功能实现）
    ├── getFile.cpp       # 文件/目录遍历、代码提取核心逻辑
    ├── initPrint.cpp     # Markdown文件初始化实现
    └── main.cpp          # 程序入口（流程编排+交互逻辑））
```

## 核心模块说明
| 文件 | 核心职责 |
|------|----------|
| `folderSelector.h` | 封装Windows文件夹选择对话框（基于COM API），实现宽字符（wstring）到UTF-8字符串的转换，解决中文路径问题； |
| `getFile.h`/`getFile.cpp` | 实现递归遍历目录、生成可视化目录树、按后缀筛选并提取代码内容，二进制模式拷贝文件内容保证无失真； |
| `initPrint.h`/`initPrint.cpp` | 初始化Markdown文件，写入AI角色定义、项目基础规则，并读取`rules.md`内容追加到MD文件； |
| `uiHelper.h` | 封装命令行UI交互函数，包括彩色输出、欢迎横幅、加载动画、各类提示信息（输入/错误/成功）； |
| `main.cpp` | 程序入口，负责初始化控制台编码、处理用户交互输入（含合法性校验）、调用核心函数完成Markdown文件生成。 |

## 注意事项
1. 程序启动时会自动设置控制台编码为UTF-8（`SetConsoleCP(65001)`/`SetConsoleOutputCP(65001)`），确保中文正常显示；
2. `rules.md`文件需放在可执行文件同级目录，程序会读取该文件内容作为项目基础规则；
3. 项目名称/路径避免包含`*`、`?`等特殊字符，防止文件创建失败；
4. 生成目录树时会跳过当前目录（`.`），避免循环引用。

## 许可证
GNU3.0
